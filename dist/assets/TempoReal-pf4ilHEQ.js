import{r as l,D as Pe,j as e,L as Ie}from"./index-BAKO51cE.js";import{P as Le,C as Me}from"./Cabecalho-C5Fa4hb_.js";import{R as O,L as U,C as z,X as K,Y as V,a as x,T as Y,b as Q}from"./LineChart-D0Ef6Ees.js";import"./createLucideIcon-C2Uy8MVt.js";function Ve(){const{data:r,adicionarDados:He,name:Re,adicionarNomes:De,email:X,adicionarEmail:Fe,adicionarInstituicao:q,cargo:Ge,adicionarCargo:J}=l.useContext(Pe),[Z,$]=l.useState([]),[E,ee]=l.useState([]),[w,se]=l.useState([]),[W,te]=l.useState(!0),[B,ae]=l.useState(!0),[P,ne]=l.useState(!0),[I,oe]=l.useState(!0),[L,le]=l.useState(!0),[ie,re]=l.useState(window.innerWidth),[ce,de]=l.useState(!0);l.useEffect(()=>{const s=()=>re(window.innerWidth);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),l.useEffect(()=>{if(r&&r.length>0){const s=r.filter(t=>t.__tabela==="MYUSER"),o=r.filter(t=>t.__tabela==="USER_BUSINESS"),a=r.filter(t=>t.__tabela==="BUSINESS"),c=s.map(t=>({id:t.ID,nome:t.NAME,email:t.EMAIL,role:t.ROLE,senha:t.SENHA,account:t.ACCOUNT})),d=a.map(t=>({id:t.ID,nome:t.NAME})),j=o.map(t=>({userId:t.USERID,businessId:t.BUSINESSID}));$(c),ee(d),se(j),de(!1)}},[r]);const g=Z.find(s=>s.email===X);l.useEffect(()=>{if(g&&w.length&&E.length){const s=w.find(a=>a.userId===g.id),o=E.find(a=>a.id===(s==null?void 0:s.businessId));q((o==null?void 0:o.nome)||"Fundação Educere"),J(g.account||"Não trabalha")}},[g,w,E]);const me=()=>te(!W),he=()=>ae(!B),xe=()=>ne(!P),ue=()=>oe(!I),fe=()=>le(!L);if(ce)return e.jsx("div",{className:"flex items-center justify-center h-full bg-fundo_azul_escuro_elegante w-full",children:e.jsx(Ie,{})});const n="bg-fundo_azul_escuro_elegante w-screen max-sm:w-[95vw] sm:w-2/3 md:w-1/3 h-36 p-4 m-2 rounded-2xl shadow-md flex flex-col justify-between items-center",M="bg-fundo_azul_escuro_elegante w-full sm:w-2/3 lg:w-1/2 h-[60vh] m-2 p-4 rounded-2xl shadow-md flex justify-center items-center",u="bg-fundo_azul_escuro_elegante h-16 w-sceen flex justify-center items-center text-2xl font-bold border-b-2 border-amber-400 rounded-2xl m-2 text-fonte_elegante_amarelo shadow-sm cursor-pointer",N="text-2xl sm:text-3xl text-fonte_elegante_amarelo font-semibold text-center",p="flex justify-center items-end h-20 text-5xl sm:text-6xl font-light text-fonte_elegante_amarelo text-center",v="text-2xl sm:text-3xl text-fonte_elegante_amarelo font-semibold text-center",A="flex justify-center items-end h-20 text-5xl sm:text-6xl font-light text-fonte_elegante_amarelo text-center",m="text-2xl sm:text-3xl text-fonte_elegante_amarelo font-semibold text-center",h="flex justify-center items-end h-20 text-5xl sm:text-6xl font-light text-fonte_elegante_amarelo text-center",C="text-2xl sm:text-3xl text-amber-400 font-semibold text-center",b="flex justify-center items-end h-20 text-5xl sm:text-6xl font-light text-amber-400 text-center",f="flex flex-col md:flex-row flex-wrap justify-center items-center ",H=r.filter(s=>s.__tabela==="ACTIVEPOWER"),R=r.filter(s=>s.__tabela==="CURRENT"),je=r.filter(s=>s.__tabela==="CONSUMPTION"),ge=r.filter(s=>s.__tabela==="VOLTAGE"),Ne=r.filter(s=>s.__tabela==="GENERATION"),k=H[0]||{},y=R[0]||{},T=ge[0]||{},_=Ne[0]||{},S=je[0]||{},D=k.PHASEA||0,F=k.PHASEB||0,G=k.PHASEC||0,pe=T.PHASEA||0,ve=T.PHASEB||0,Ae=T.PHASEC||0,Ce=y.PHASEA||0,be=y.PHASEB||0,_e=y.PHASEC||0,Se=S.TODAY||0,Ee=S.WEEK||0,we=S.MONTHNOW||0,ke=S.LASTMONTH||0,ye=_.TODAY||0,Te=_.WEEK||0,We=_.MONTHNOW||0,Be=_.LASTMONTH||0;return e.jsxs(Le,{children:[ie>=600&&e.jsx(Me,{}),e.jsxs("div",{className:"w-full h-full flex flex-col bg-fundo_azul_claro_elegante",children:[e.jsx("header",{className:u,onClick:me,children:e.jsx("h1",{className:"text-fonte_elegante_amarelo text-xl",children:"Tensão [V]"})}),W&&e.jsxs("div",{className:f,children:[e.jsxs("div",{className:n,children:[e.jsx("h1",{className:m,children:"Fase A"}),e.jsxs("div",{className:h,children:[pe||"0.0","V"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:m,children:"Fase B"}),e.jsxs("div",{className:h,children:[ve||"0.0","V"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:m,children:"Fase C"}),e.jsxs("div",{className:h,children:[Ae||"0.0","V"]})]})]}),e.jsx("header",{className:u,onClick:he,children:e.jsx("h1",{className:"text-fonte_elegante_amarelo",children:"Corrente [A]"})}),B&&e.jsxs("div",{className:f,children:[e.jsxs("div",{className:n,children:[e.jsx("h1",{className:m,children:"Fase A"}),e.jsxs("div",{className:h,children:[Ce||"0.0","A"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:m,children:"Fase B"}),e.jsxs("div",{className:h,children:[be||"0.0","A"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:m,children:"Fase C"}),e.jsxs("div",{className:h,children:[_e||"0.0","A"]})]})]}),e.jsx("header",{className:u,onClick:xe,children:e.jsx("h1",{className:"text-fonte_elegante_amarelo",children:"Potência Ativa [W]"})}),P&&e.jsxs("div",{className:f,children:[e.jsxs("div",{className:n,children:[e.jsx("h1",{className:C,children:"Fase A"}),e.jsxs("div",{className:b,children:[D||"0.00","W"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:C,children:"Fase B"}),e.jsxs("div",{className:b,children:[F||"0.00","W"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:C,children:"Fase C"}),e.jsxs("div",{className:b,children:[G||"0.00","W"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:C,children:"Total"}),e.jsxs("div",{className:b,children:[(parseFloat(D)+parseFloat(F)+parseFloat(G)).toFixed(2)||"0.00","W"]})]})]}),e.jsx("header",{className:u,onClick:ue,children:e.jsx("h1",{className:"text-fonte_elegante_amarelo",children:"Consumo [kWh]"})}),I&&e.jsxs("div",{className:f,children:[e.jsxs("div",{className:n,children:[e.jsx("h1",{className:N,children:"Hoje"}),e.jsxs("div",{className:p,children:[Se||"0.00","kWh"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:N,children:"Semana Atual"}),e.jsxs("div",{className:p,children:[Ee||"0.00","kWh"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:N,children:"Mês Atual"}),e.jsxs("div",{className:p,children:[we||"0.00","kWh"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:N,children:"Mês Anterior"}),e.jsxs("div",{className:p,children:[ke||"0.00","kWh"]})]})]}),e.jsx("header",{className:u,onClick:fe,children:e.jsx("h1",{className:"text-fonte_elegante_amarelo",children:"Geração [kWh]"})}),L&&e.jsxs("div",{className:f,children:[e.jsxs("div",{className:n,children:[e.jsx("h1",{className:v,children:"Hoje"}),e.jsxs("div",{className:A,children:[ye||"0.00","kWh"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:v,children:"Semana Atual"}),e.jsxs("div",{className:A,children:[Te||"0.00","kWh"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:v,children:"Mês Atual"}),e.jsxs("div",{className:A,children:[We||"0.00","kWh"]})]}),e.jsxs("div",{className:n,children:[e.jsx("h1",{className:v,children:"Mês Anterior"}),e.jsxs("div",{className:A,children:[Be||"0.00","kWh"]})]})]}),e.jsxs("div",{className:"flex flex-col m-2 lg:flex-row justify-around items-center gap-6",children:[e.jsx("div",{className:M,children:e.jsx(O,{width:"90%",height:380,children:e.jsxs(U,{data:H,margin:{top:24,right:30,left:40,bottom:20},children:[e.jsx("text",{x:"50%",y:10,textAnchor:"middle",dominantBaseline:"central",style:{fill:"white",fontSize:18},children:"Potência Ativa"}),e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(K,{domain:[0,10],tick:{fill:"white"},label:{value:"Quantidade de Informações",offset:-2,position:"insideBottom"}}),e.jsx(V,{domain:([s,o])=>{const a=o-s,c=Math.ceil(a*.15);return[0,o+c]},tick:{fill:"white"},tickFormatter:s=>Math.floor(s),label:{value:"Watts (W)",angle:-90,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(x,{type:"bump",dataKey:"PHASEA",stroke:"#f5af33",dot:!1,strokeWidth:2}),e.jsx(x,{type:"bump",dataKey:"PHASEB",stroke:"#ffaa00",dot:!1,strokeWidth:2}),e.jsx(x,{type:"bump",dataKey:"PHASEC",stroke:"#ffcc00",dot:!1,strokeWidth:2}),e.jsx(Y,{content:s=>{const{active:o,payload:a,label:c}=s;if(!o||!a||a.length===0)return null;const d=a[0].payload,j=new Date(d.TIME).toLocaleDateString("pt-BR"),t=new Date(d.TIME).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{style:{background:"rgba(0,0,0,0.7)",color:"#fff",padding:12,borderRadius:4},children:[e.jsxs("div",{style:{marginBottom:8,fontWeight:"bold"},children:[j," ",t]}),a.map(i=>e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{display:"inline-block",width:10,height:10,background:i.color,marginRight:8}}),e.jsxs("span",{children:[i.name,": ",typeof i.value=="number"?i.value.toFixed(2):i.value]})]},i.name))]})}}),e.jsx(Q,{wrapperStyle:{color:"white"},verticalAlign:"top",height:44})]})})}),e.jsx("div",{className:M,children:e.jsx(O,{width:"90%",height:380,children:e.jsxs(U,{data:R,margin:{top:24,right:30,left:40,bottom:20},children:[e.jsx("text",{x:"50%",y:10,textAnchor:"middle",dominantBaseline:"central",style:{fill:"white",fontSize:18},children:"Corrente"}),e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(K,{domain:[0,10],tick:{fill:"white"},label:{value:"Quantidade de Informações",offset:-2,position:"insideBottom"}}),e.jsx(V,{domain:([s,o])=>{const a=o-s,c=Math.ceil(a*.15);return[0,o+c]},tick:{fill:"white"},tickFormatter:s=>s.toFixed(1),label:{value:"Ampere (A)",angle:-90,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(x,{type:"bump",dataKey:"PHASEA",stroke:"#f5af33",dot:!1,strokeWidth:2}),e.jsx(x,{type:"bump",dataKey:"PHASEB",stroke:"#ffaa00",dot:!1,strokeWidth:2}),e.jsx(x,{type:"bump",dataKey:"PHASEC",stroke:"#ffcc00",dot:!1,strokeWidth:2}),e.jsx(Y,{content:s=>{const{active:o,payload:a,label:c}=s;if(!o||!a||a.length===0)return null;const d=a[0].payload,j=new Date(d.TIME).toLocaleDateString("pt-BR"),t=new Date(d.TIME).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{style:{background:"rgba(0,0,0,0.7)",color:"#fff",padding:12,borderRadius:4},children:[e.jsxs("div",{style:{marginBottom:8,fontWeight:"bold"},children:[j," ",t]}),a.map(i=>e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{display:"inline-block",width:10,height:10,background:i.color,marginRight:8}}),e.jsxs("span",{children:[i.name,": ",typeof i.value=="number"?i.value.toFixed(2):i.value]})]},i.name))]})}}),e.jsx(Q,{wrapperStyle:{color:"white"},verticalAlign:"top",height:44})]})})})]})]})]})}export{Ve as default};
