import{r as d,D as p,j as e}from"./index-CgRrw7Cw.js";import{c as C,P as b,C as K}from"./Cabecalho-BlIZVEOK.js";import{R as g,L as T,C as S,X as P,Y as w,a as j,T as v,b as H}from"./LineChart-DBnQH0I0.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],B=C("download",L);function V(){const{data:c,adicionarDados:N,name:R,adicionarNomes:M}=d.useContext(p),A="bg-fundo_azul_escuro_elegante w-full md:w-1/2 lg:w-[31vw] h-auto m-1 p-4 rounded-md border-b",u="bg-fundo_azul_escuro_elegante w-[50vw] h-[25vh] m-1 p-2 rounded-md flex flex-row",[h,E]=d.useState(window.innerWidth);d.useEffect(()=>{const a=()=>E(window.innerWidth);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const o=d.useMemo(()=>c.reduce((a,s)=>{const t=s.__tabela;return a[t]||(a[t]=[]),a[t].push(s),a},{}),[c]);function x(){function a(l){const f=Object.keys(l[0]),i=[];i.push(f.join(","));for(const m of l){const y=f.map(r=>m[r]);i.push(y.join(","))}return i.join(`
`)}const s=a(c),t=new Blob([s],{type:"text/csv"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="dados.csv",n.click()}const F=[{title:"Potência Ativa",data:o.ACTIVEPOWER||[],yLabel:"Watts (W)",yFormatter:a=>Math.floor(a),lines:[{dataKey:"PHASEA",name:"Fase A",color:"#f5af33"},{dataKey:"PHASEB",name:"Fase B",color:"#ffaa00"},{dataKey:"PHASEC",name:"Fase C",color:"#ffcc00"}]},{title:"Corrente",data:o.CURRENT||[],yLabel:"Ampere (A)",yFormatter:a=>a,lines:[{dataKey:"PHASEA",name:"Fase A",color:"#f5af33"},{dataKey:"PHASEB",name:"Fase B",color:"#ffaa00"},{dataKey:"PHASEC",name:"Fase C",color:"#ffcc00"}]},{title:"Tensão",data:o.VOLTAGE||[],yLabel:"Volts (V)",yFormatter:a=>a,lines:[{dataKey:"PHASEA",name:"Fase A",color:"#f5af33"},{dataKey:"PHASEB",name:"Fase B",color:"#ffaa00"},{dataKey:"PHASEC",name:"Fase C",color:"#ffcc00"}]},{title:"Fator Potência",data:o.POWERFACTOR||[],yLabel:"Sem unidade",yFormatter:a=>a.toFixed(1),lines:[{dataKey:"PHASEA",name:"Fase A",color:"#f5af33"},{dataKey:"PHASEB",name:"Fase B",color:"#ffaa00"},{dataKey:"PHASEC",name:"Fase C",color:"#ffcc00"}]},{title:"Potência Aparente",data:o.APPARENTPOWER||[],yLabel:"Volt-Ampere (VA)",yFormatter:a=>Math.floor(a),lines:[{dataKey:"PHASEA",name:"Fase A",color:"#f5af33"},{dataKey:"PHASEB",name:"Fase B",color:"#ffaa00"},{dataKey:"PHASEC",name:"Fase C",color:"#ffcc00"}]},{title:"Temperatura do Equipamento",data:o.EQUIPMENTTEMPERATURE||[],yLabel:"Celsius (C°)",yFormatter:a=>Math.floor(a),lines:[{dataKey:"TPSD",name:"Temperatura",color:"#f5af33"}]},{title:"Ângulo entre Tensões",data:o.ANGLEBETWEENVOLTAGES||[],yLabel:"Graus (°)",yFormatter:a=>a.toFixed(1),lines:[{dataKey:"YUAUB",name:"Fase A e Fase B",color:"#f5af33"},{dataKey:"YUAUC",name:"Fase A e Fase C",color:"#ffaa00"},{dataKey:"YUBUC",name:"Fase B e Fase C",color:"#ffcc00"}]},{title:"Ângulo entre Tensão e Corrente",data:o.ANGLEVOLTAGECURRENT||[],yLabel:"Graus (°)",yFormatter:a=>a.toFixed(1),lines:[{dataKey:"PHASEA",name:"Fase A",color:"#f5af33"},{dataKey:"PHASEB",name:"Fase B",color:"#ffaa00"},{dataKey:"PHASEC",name:"Fase C",color:"#ffcc00"}]},{title:"Frequência",data:o.FREQUENCY||[],yLabel:"Hertz (Hz)",yFormatter:a=>Math.floor(a),lines:[{dataKey:"FREQ",name:"Frequência",color:"#f5af33"}]},{title:"Geração",data:o.GENERATION||[],yLabel:"Kilowatts/Hora (kWh)",yFormatter:a=>Math.floor(a),lines:[{dataKey:"TODAY",name:"Hoje",color:"#f5af33"},{dataKey:"WEEK",name:"Semana Atual",color:"#ffaa00"},{dataKey:"MONTHNOW",name:"Mês Atual",color:"#ffcc00"},{dataKey:"LASTMONTH",name:"Mês Anterior",color:"#ffdd00"}]},{title:"Consumo",data:o.CONSUMPTION||[],yLabel:"Kilowatts/Hora (kWh)",yFormatter:a=>Math.floor(a),lines:[{dataKey:"TODAY",name:"Hoje",color:"#f5af33"},{dataKey:"WEEK",name:"Semana Atual",color:"#ffaa00"},{dataKey:"MONTHNOW",name:"Mês Atual",color:"#ffcc00"},{dataKey:"LASTMONTH",name:"Mês Anterior",color:"#ffdd00"}]},{title:"Potência Reativa",data:o.REACTIVEPOWER||[],yLabel:"Volt-Ampere reativo (VAr)",yFormatter:a=>Math.floor(a),lines:[{dataKey:"PHASEA",name:"Fase A",color:"#f5af33"},{dataKey:"PHASEB",name:"Fase B",color:"#ffaa00"},{dataKey:"PHASEC",name:"Fase C",color:"#ffcc00"},{dataKey:"PHASET",name:"Fase Total",color:"#ffdd00"}]}];return e.jsxs(b,{children:[h>=600&&e.jsx(K,{}),e.jsxs("div",{className:"w-full h-full flex flex-col bg-fundo_azul_claro_elegante ",children:[e.jsx("div",{className:"flex flex-col lg:flex-row flex-wrap justify-around items-center gap-6 mb-6 mt-5",children:F.map((a,s)=>e.jsx("div",{className:`${A} `,children:e.jsx(g,{width:"90%",height:380,children:e.jsxs(T,{data:a.data,margin:{top:24,right:30,left:40,bottom:20},children:[e.jsx("text",{x:"50%",y:10,textAnchor:"middle",dominantBaseline:"central",style:{fill:"white",fontSize:18},children:a.title}),e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(P,{domain:[0,5],tick:{fill:"white"},label:{value:"Quantidade de Informações",offset:-2,position:"insideBottom"}}),e.jsx(w,{domain:([t,n])=>[Math.floor(t-1),Math.ceil(n+1)],tick:{fill:"white"},tickFormatter:a.yFormatter,label:{value:a.yLabel,angle:-90,position:"insideLeft",style:{textAnchor:"middle"}}}),a.lines.map((t,n)=>e.jsx(j,{type:"linear",dataKey:t.dataKey,name:t.name,stroke:t.color,dot:!1,strokeWidth:2},n)),e.jsx(v,{content:t=>{const{active:n,payload:l,label:f}=t;if(!n||!l||l.length===0)return null;const i=l[0].payload,m=new Date(i.TIME).toLocaleDateString("pt-BR"),y=new Date(i.TIME).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{style:{background:"rgba(0,0,0,0.7)",color:"#fff",padding:12,borderRadius:4},children:[e.jsxs("div",{style:{marginBottom:8,fontWeight:"bold"},children:[m," ",y]}),l.map(r=>e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{display:"inline-block",width:10,height:10,background:r.color,marginRight:8}}),e.jsxs("span",{children:[r.name,": ",typeof r.value=="number"?r.value.toFixed(2):r.value]})]},r.name))]})}}),e.jsx(H,{wrapperStyle:{color:"white"},verticalAlign:"top",height:44})]})})},s))}),e.jsxs("div",{className:"flex flex-row justify-around",children:[e.jsx("div",{className:u,children:e.jsxs("button",{className:"bg-azul_mais_escuro flex items-center justify-center w-48 h-10 rounded-md",onClick:x,children:[e.jsx(B,{className:"mr-1"})," Exportar CSV"]})}),e.jsx("div",{className:u})]})]})]})}export{V as default};
